<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/Portfolio_favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Portfolio</title>
</head>

<body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <script type="module">
        import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
        // Initialize the Flowise embed and expose a global helper so the React app
        // can open/toggle the chat from components (e.g. Hero button).
        Chatbot.init({
            chatflowid: "679e900b-8e2b-4a80-824c-29342ddf9f19",
            apiHost: "https://flowise-ai-production-2c6a.up.railway.app",
            theme: {
                // --- BUTTON CONFIG ---
                button: {
                    backgroundColor: '#00CED1',
                    right: 30,
                    bottom: 30,
                    size: 56,
                    dragAndDrop: true,
                    iconColor: 'black',
                },
                tooltip: {
                    showTooltip: false,
                },
                // --- CHAT WINDOW CONFIG ---
                chatWindow: {
                    showTitle: true,
                    title: 'REN-AI Assistant', /* Clean title, styling handles status */
                    titleAvatarSrc: 'https://icons.iconarchive.com/icons/iconarchive/robot-avatar/512/Cyan-1-Robot-Avatar-icon.png',
                    welcomeMessage: 'Ask me anything about the portfolio!',
                    backgroundColor: '#0a0a0ac0',
                    fontSize: 16,
                    starterPrompts: [
                        "Tell me about his skills",
                        "Show me his projects",
                        "What is his background?"
                    ],
                    sourceDocsTitle: 'Sources:',
                    // Title Bar Styling
                    titleBackgroundColor: '#00CED180', /* Dark header */
                    titleTextColor: '#ffffff',
                    // Message Styling
                    botMessage: {
                        backgroundColor: '#1f2937', /* Dark gray for bot bubble */
                        textColor: '#e5e7eb',
                        showAvatar: true,
                        avatarSrc: 'https://icons.iconarchive.com/icons/iconarchive/robot-avatar/512/Cyan-1-Robot-Avatar-icon.png',
                    },
                    userMessage: {
                        backgroundColor: '#00CED1', /* User message matches primary accent color */
                        textColor: '#000000',
                        showAvatar: false,
                    },
                    // Text Input Styling
                    textInput: {
                        placeholder: 'Type your message...',
                        backgroundColor: '#1f2937', /* Input background dark gray */
                        textColor: '#e5e7eb',
                        sendButtonColor: '#00CED1',
                        placeholderTextColor: '#9ca3af',
                        maxChars: 100,
                        autoFocus: true,
                    },
                    // Footer
                    footer: {
                        showFooter: false,
                    }
                }
                /* customCSS property is now REMOVED */
            }
        })
            .then(function (instance) {
                // Expose a small global helper object: window.FlowiseChat.open()/toggle()
                try {
                    window.FlowiseChat = {
                        instance: instance,
                        open: (typeof instance?.open === 'function') ? function () { instance.open(); } : function () {
                            var btn = document.querySelector('[data-flowise-open]') || document.querySelector('.flowise-embed-open') || document.querySelector('button[aria-label="Open chat"]');
                            if (btn instanceof HTMLElement) btn.click();
                        },
                        toggle: (typeof instance?.toggle === 'function') ? function () { instance.toggle(); } : undefined
                    };
                } catch (e) {
                    console.warn('Could not attach FlowiseChat helper', e);
                }
            })
            .catch(function (err) {
                console.error('Flowise init failed', err);
            });
    </script>
</body>

</html>